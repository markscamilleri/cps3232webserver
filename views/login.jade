include utils/head
include utils/bodyWithMenu
div(class="container")
    div(class="col-sm-6 col-sm-offset-3")
        h1
            span(class="fa fa-sign-in")  Login

        // show any messages that come back with authentication
        if(message.length > 0)
            div(class="alert alert-danger alert-dismissable fade in") #{message}

        form
            div(class="form-group")
                label(for="username") Username
                input(type="text" class="form-control" name="username" id="username")
            div(class="form-group")
                label(for="password") Password
                input(type="password" class="form-control" name="password" id="password")

            button(type="submit" onclick="javascript:submitForm()" class="btn btn-warning btn-lg") Log in

        hr
        p Need an account?&nbsp;
            a(href="/signup") Sign Up
            |  or go&nbsp;
            a(href="/") Home
            | .


script(type="text/javascript")
    | function submitForm(){
    |     var data = {
    |       username: document.getElementById("username").value,
    |       password: document.getElementById("password").value
    |     };
    |     var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance
    |     xmlhttp.open("POST", "/login");
    |     xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    |     xmlhttp.send(JSON.stringify(data));
    | }